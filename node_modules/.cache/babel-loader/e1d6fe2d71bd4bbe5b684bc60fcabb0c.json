{"ast":null,"code":"import { resetLoginForm } from \"./loginForm.js\";\nimport { resetSignupForm } from \"./signupForm.js\";\nimport { getMyTrips } from \"./myTrips.js\"; // synchronous action creators\n\nexport const setCurrentUser = user => {\n  return {\n    type: \"SET_CURRENT_USER\",\n    // payload: user\n    user\n  };\n};\nexport const clearCurrentUser = () => {\n  return {\n    type: \"CLEAR_CURRENT_USER\"\n  };\n}; // asynchronous action creators\n\nexport const login = (credentials, history) => {\n  console.log(\"credentials are\", credentials);\n  return dispatch => {\n    return fetch(\"http://localhost:3000/api/v1/login\", {\n      credentials: \"include\",\n      method: \"POST\",\n      headers: {\n        // Accepts: 'application/json',\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(credentials)\n    }) // .then(r => r.text())\n    .then(r => r.json()).then(response => {\n      if (response.error) {\n        alert(response.error);\n      } else {\n        dispatch(setCurrentUser(response.data));\n        dispatch(getMyTrips());\n        dispatch(resetLoginForm());\n      }\n    }).catch(console.log);\n  };\n};\nexport const signup = credentials => {\n  return dispatch => {\n    const userInfo = {\n      user: credentials\n    };\n    return fetch(\"http://localhost:3000/api/v1/signup\", {\n      credentials: \"include\",\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(userInfo)\n    }).then(r => r.json()).then(response => {\n      if (response.error) {\n        alert(response.error);\n      } else {\n        dispatch(setCurrentUser(response.data));\n        dispatch(getMyTrips());\n        dispatch(resetSignupForm());\n        history.pushState('/');\n      }\n    }).catch(console.log);\n  };\n};\nexport const logout = () => {\n  return dispatch => {\n    dispatch(clearCurrentUser());\n    return fetch('http://localhost:3000/api/v1/logout', {\n      credentials: \"include\",\n      method: \"DELETE\"\n    });\n  };\n};\nexport const getCurrentUser = () => {\n  console.log(\"DISPATCHING GET CURRENT USER\");\n  return dispatch => {\n    return fetch(\"http://localhost:3000/api/v1/get_current_user\", {\n      credentials: \"include\",\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    }).then(r => r.json()).then(response => {\n      if (response.error) {\n        alert(response.error);\n      } else {\n        dispatch(setCurrentUser(response.data));\n        dispatch(getMyTrips());\n      }\n    }).catch(console.log);\n  };\n};","map":{"version":3,"sources":["/Users/lesliegonzalez/Development/traveler-frontend/src/actions/currentUser.js"],"names":["resetLoginForm","resetSignupForm","getMyTrips","setCurrentUser","user","type","clearCurrentUser","login","credentials","history","console","log","dispatch","fetch","method","headers","body","JSON","stringify","then","r","json","response","error","alert","data","catch","signup","userInfo","pushState","logout","getCurrentUser"],"mappings":"AAAA,SAASA,cAAT,QAA+B,gBAA/B;AACA,SAASC,eAAT,QAAgC,iBAAhC;AACA,SAASC,UAAT,QAA2B,cAA3B,C,CAEA;;AACA,OAAO,MAAMC,cAAc,GAAGC,IAAI,IAAI;AACpC,SAAO;AACLC,IAAAA,IAAI,EAAE,kBADD;AAEL;AACAD,IAAAA;AAHK,GAAP;AAKD,CANM;AAQP,OAAO,MAAME,gBAAgB,GAAG,MAAM;AACpC,SAAO;AACLD,IAAAA,IAAI,EAAE;AADD,GAAP;AAGD,CAJM,C,CAMP;;AACA,OAAO,MAAME,KAAK,GAAG,CAACC,WAAD,EAAcC,OAAd,KAA0B;AAC7CC,EAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ,EAA+BH,WAA/B;AACA,SAAOI,QAAQ,IAAI;AACjB,WAAOC,KAAK,CAAC,oCAAD,EAAuC;AACjDL,MAAAA,WAAW,EAAE,SADoC;AAEjDM,MAAAA,MAAM,EAAE,MAFyC;AAGjDC,MAAAA,OAAO,EAAE;AACP;AACA,wBAAgB;AAFT,OAHwC;AAOjDC,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeV,WAAf;AAP2C,KAAvC,CAAL,CASL;AATK,KAUJW,IAVI,CAUCC,CAAC,IAAIA,CAAC,CAACC,IAAF,EAVN,EAWJF,IAXI,CAWCG,QAAQ,IAAI;AAChB,UAAIA,QAAQ,CAACC,KAAb,EAAoB;AAClBC,QAAAA,KAAK,CAACF,QAAQ,CAACC,KAAV,CAAL;AACD,OAFD,MAEO;AACLX,QAAAA,QAAQ,CAACT,cAAc,CAACmB,QAAQ,CAACG,IAAV,CAAf,CAAR;AACAb,QAAAA,QAAQ,CAACV,UAAU,EAAX,CAAR;AACAU,QAAAA,QAAQ,CAACZ,cAAc,EAAf,CAAR;AACD;AACF,KAnBI,EAoBJ0B,KApBI,CAoBEhB,OAAO,CAACC,GApBV,CAAP;AAqBD,GAtBD;AAuBD,CAzBM;AA2BP,OAAO,MAAMgB,MAAM,GAAGnB,WAAW,IAAI;AACnC,SAAOI,QAAQ,IAAI;AACjB,UAAMgB,QAAQ,GAAG;AACfxB,MAAAA,IAAI,EAAEI;AADS,KAAjB;AAGA,WAAOK,KAAK,CAAC,qCAAD,EAAwC;AAClDL,MAAAA,WAAW,EAAE,SADqC;AAElDM,MAAAA,MAAM,EAAE,MAF0C;AAGlDC,MAAAA,OAAO,EAAE;AACP,wBAAgB;AADT,OAHyC;AAMlDC,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeU,QAAf;AAN4C,KAAxC,CAAL,CAQJT,IARI,CAQCC,CAAC,IAAIA,CAAC,CAACC,IAAF,EARN,EASJF,IATI,CASCG,QAAQ,IAAI;AAChB,UAAIA,QAAQ,CAACC,KAAb,EAAoB;AAClBC,QAAAA,KAAK,CAACF,QAAQ,CAACC,KAAV,CAAL;AACD,OAFD,MAEO;AACLX,QAAAA,QAAQ,CAACT,cAAc,CAACmB,QAAQ,CAACG,IAAV,CAAf,CAAR;AACAb,QAAAA,QAAQ,CAACV,UAAU,EAAX,CAAR;AACAU,QAAAA,QAAQ,CAACX,eAAe,EAAhB,CAAR;AACAQ,QAAAA,OAAO,CAACoB,SAAR,CAAkB,GAAlB;AACD;AACF,KAlBI,EAmBJH,KAnBI,CAmBEhB,OAAO,CAACC,GAnBV,CAAP;AAoBD,GAxBD;AAyBD,CA1BM;AA4BP,OAAO,MAAMmB,MAAM,GAAG,MAAM;AAC1B,SAAOlB,QAAQ,IAAI;AACjBA,IAAAA,QAAQ,CAACN,gBAAgB,EAAjB,CAAR;AACA,WAAOO,KAAK,CAAC,qCAAD,EAAwC;AAClDL,MAAAA,WAAW,EAAE,SADqC;AAElDM,MAAAA,MAAM,EAAE;AAF0C,KAAxC,CAAZ;AAID,GAND;AAOD,CARM;AAUP,OAAO,MAAMiB,cAAc,GAAG,MAAM;AAClCrB,EAAAA,OAAO,CAACC,GAAR,CAAY,8BAAZ;AACA,SAAOC,QAAQ,IAAI;AACjB,WAAOC,KAAK,CAAC,+CAAD,EAAkD;AAC5DL,MAAAA,WAAW,EAAE,SAD+C;AAE5DM,MAAAA,MAAM,EAAE,KAFoD;AAG5DC,MAAAA,OAAO,EAAE;AACP,wBAAgB;AADT;AAHmD,KAAlD,CAAL,CAOJI,IAPI,CAOCC,CAAC,IAAIA,CAAC,CAACC,IAAF,EAPN,EAQJF,IARI,CAQCG,QAAQ,IAAI;AAChB,UAAIA,QAAQ,CAACC,KAAb,EAAoB;AAClBC,QAAAA,KAAK,CAACF,QAAQ,CAACC,KAAV,CAAL;AACD,OAFD,MAEO;AACLX,QAAAA,QAAQ,CAACT,cAAc,CAACmB,QAAQ,CAACG,IAAV,CAAf,CAAR;AACAb,QAAAA,QAAQ,CAACV,UAAU,EAAX,CAAR;AACD;AACF,KAfI,EAgBJwB,KAhBI,CAgBEhB,OAAO,CAACC,GAhBV,CAAP;AAiBD,GAlBD;AAmBD,CArBM","sourcesContent":["import { resetLoginForm } from \"./loginForm.js\"\nimport { resetSignupForm } from \"./signupForm.js\"\nimport { getMyTrips } from \"./myTrips.js\"\n\n// synchronous action creators\nexport const setCurrentUser = user => {\n  return {\n    type: \"SET_CURRENT_USER\",\n    // payload: user\n    user\n  }\n}\n\nexport const clearCurrentUser = () => {\n  return {\n    type: \"CLEAR_CURRENT_USER\"\n  }\n}\n\n// asynchronous action creators\nexport const login = (credentials, history) => {\n  console.log(\"credentials are\", credentials)\n  return dispatch => {\n    return fetch(\"http://localhost:3000/api/v1/login\", {\n      credentials: \"include\",\n      method: \"POST\",\n      headers: {\n        // Accepts: 'application/json',\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(credentials)\n    })\n      // .then(r => r.text())\n      .then(r => r.json())\n      .then(response => {\n        if (response.error) {\n          alert(response.error)\n        } else {\n          dispatch(setCurrentUser(response.data))\n          dispatch(getMyTrips())\n          dispatch(resetLoginForm())\n        }\n      })\n      .catch(console.log)\n  }\n}\n\nexport const signup = credentials => {\n  return dispatch => {\n    const userInfo = {\n      user: credentials\n    }\n    return fetch(\"http://localhost:3000/api/v1/signup\", {\n      credentials: \"include\",\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(userInfo)\n    })\n      .then(r => r.json())\n      .then(response => {\n        if (response.error) {\n          alert(response.error)\n        } else {\n          dispatch(setCurrentUser(response.data))\n          dispatch(getMyTrips())\n          dispatch(resetSignupForm())\n          history.pushState('/')\n        }\n      })\n      .catch(console.log)\n  }\n}\n\nexport const logout = () => {\n  return dispatch => {\n    dispatch(clearCurrentUser())\n    return fetch('http://localhost:3000/api/v1/logout', {\n      credentials: \"include\",\n      method: \"DELETE\"\n    })\n  }\n}\n\nexport const getCurrentUser = () => {\n  console.log(\"DISPATCHING GET CURRENT USER\")\n  return dispatch => {\n    return fetch(\"http://localhost:3000/api/v1/get_current_user\", {\n      credentials: \"include\",\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n    })\n      .then(r => r.json())\n      .then(response => {\n        if (response.error) {\n          alert(response.error)\n        } else {\n          dispatch(setCurrentUser(response.data))\n          dispatch(getMyTrips())\n        }\n      })\n      .catch(console.log)\n  }\n}"]},"metadata":{},"sourceType":"module"}